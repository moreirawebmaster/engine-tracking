# Engine Tracking

[![pub.dev](https://img.shields.io/pub/v/engine_tracking.svg)](https://pub.dev/packages/engine_tracking)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Flutter](https://img.shields.io/badge/Flutter-3.32.0+-blue.svg)](https://flutter.dev/)
[![Dart](https://img.shields.io/badge/Dart-3.8.0+-blue.svg)](https://dart.dev/)

Uma biblioteca Flutter completa para **tracking de analytics** e **bug reporting**, oferecendo integra√ß√£o com Firebase Analytics, Firebase Crashlytics, Grafana Faro e Google Cloud Logging.

## üöÄ Caracter√≠sticas Principais

- üìä **Analytics M√∫ltiplo**: Suporte simult√¢neo para Firebase Analytics, Grafana Faro e Google Cloud Logging
- üêõ **Bug Tracking Avan√ßado**: Integra√ß√£o com Firebase Crashlytics, Grafana Faro e Google Cloud Logging para monitoramento completo
- üåê **HTTP Tracking**: Monitoramento autom√°tico de requisi√ß√µes HTTPS com m√©tricas detalhadas
- üëÅÔ∏è **View Tracking**: Sistema autom√°tico de tracking de telas com `EngineStatelessWidget` e `EngineStatefulWidget`
- ‚öôÔ∏è **Configura√ß√£o Flex√≠vel**: Ative/desative servi√ßos individualmente atrav√©s de configura√ß√µes
- üìù **Logging Estruturado**: Sistema de logs com diferentes n√≠veis e contextos
- üÜî **Session ID Autom√°tico**: UUID v4 √∫nico por abertura do app para correla√ß√£o de logs e analytics
- üîí **Tipo-seguro**: Implementa√ß√£o completamente tipada em Dart
- üß™ **Test√°vel**: Cobertura de testes superior a 95% para componentes test√°veis
- üèóÔ∏è **Arquitetura Consistente**: Padr√£o unificado entre Analytics e Bug Tracking
- üéØ **Inicializa√ß√£o Condicional**: Servi√ßos s√£o inicializados apenas se habilitados na configura√ß√£o
- üì¶ **Export Unificado**: Todos os imports podem ser feitos atrav√©s de `package:engine_tracking/engine_tracking.dart`
- üöÄ **Exemplos Completos**: Apps de demonstra√ß√£o com casos de uso reais (HTTP + View Tracking)

## üì¶ Instala√ß√£o

Adicione ao seu `pubspec.yaml`:

```yaml
dependencies:
  engine_tracking: ^1.3.0
```

Execute:

```bash
flutter pub get
```
  
## üèóÔ∏è Arquitetura da Solu√ß√£o

### üÜî Sistema de Session ID (Correla√ß√£o Autom√°tica)

```mermaid
graph TD
    A["App Initialization"] --> B["EngineSession.instance"]
    B --> C["Generate UUID v4"]
    C --> D["xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"]
    
    D --> E["Session ID em Mem√≥ria"]
    E --> F["Auto-inject Autom√°tico"]
    
    G["EngineAnalytics.logEvent()"] --> F
    H["EngineBugTracking.log()"] --> F
    I["EngineLog.info()"] --> F
    J["Firebase Analytics"] --> F
    K["Google Cloud Logging"] --> F
    L["Crashlytics"] --> F
    
    F --> M["Enrich Data"]
    M --> N["session_id: UUID v4"]
    
    N --> O["Firebase Analytics"]
    N --> P["Google Cloud Logging"] 
    N --> Q["Grafana Faro"]
    N --> R["Splunk"]
    N --> S["Crashlytics"]
    
    T["Correla√ß√£o de Logs"] --> U["Mesmo session_id"]
    U --> V["Jornada Completa do Usu√°rio"]
    
    style B fill:#e1f5fe
    style F fill:#f3e5f5
    style N fill:#e8f5e8
    style V fill:#fff3e0
```

### üì± Widgets Stateless e Stateful com Tracking Autom√°tico

```mermaid
graph TD
    A["App"] --> B["EngineStatelessWidget"]
    A --> C["EngineStatefulWidget"]
    
    B --> D["buildWithTracking()"]
    C --> E["buildWithTracking()"]
    
    B --> F["M√©todos Execut√°veis"]
    C --> G["M√©todos Execut√°veis"]
    
    F --> H["logUserAction()"]
    F --> I["logCustomEvent()"]
    F --> J["logScreenError()"]
    
    G --> K["logUserAction()"]
    G --> L["logCustomEvent()"]
    G --> M["logScreenError()"]
    G --> N["logStateChange()"]
    
    H --> O["EngineLog.debug()"]
    I --> O
    J --> P["EngineLog.error()"]
    K --> O
    L --> O
    M --> P
    N --> O
    
    B --> Q["Lifecycle Tracking"]
    C --> R["Lifecycle Tracking"]
    
    Q --> S["screen_initialized"]
    Q --> T["screen_viewed"]
    Q --> U["screen_closed"]
    
    R --> V["screen_initialized"]
    R --> W["screen_viewed"]
    R --> X["screen_closed"]
    
    S --> O
    T --> O
    U --> O
    V --> O
    W --> O
    X --> O
```

### üìù Sistema de Logging (EngineLog)

```mermaid
graph TD
    A["Aplica√ß√£o"] --> B["EngineLog"]
    
    B --> C["debug()"]
    B --> D["info()"]
    B --> E["warning()"]
    B --> F["error()"]
    B --> G["fatal()"]
    
    C --> H["_logWithLevel()"]
    D --> H
    E --> H
    F --> H
    G --> H
    
    H --> I["developer.log()"]
    H --> J{{"EngineAnalytics.isEnabled && includeInAnalytics?"}}
    H --> K{{"EngineBugTracking.isEnabled?"}}
    
    J -->|Sim| L["EngineAnalytics.logEvent()"]
    J -->|N√£o| M["Skip Analytics"]
    
    K -->|Sim| N["EngineBugTracking.log()"]
    K -->|N√£o| O["Skip Bug Tracking"]
    
    L --> P["Firebase Analytics"]
    L --> Q["Grafana Faro"]
    L --> R["Splunk"]
    
    N --> S["Firebase Crashlytics"]
    N --> T["Grafana Faro Bug Tracking"]
    
    K -->|Sim| U{{"level == error || fatal?"}}
    U -->|Sim| V["EngineBugTracking.recordError()"]
    U -->|N√£o| W["Apenas log normal"]
    
    V --> X["Crash Reporting"]
    X --> S
    X --> T
    
    style J fill:#f9f,stroke:#333,stroke-width:2px
    style K fill:#f9f,stroke:#333,stroke-width:2px
    style U fill:#faa,stroke:#333,stroke-width:2px
    style V fill:#faa,stroke:#333,stroke-width:2px
```

### üìä Sistema de Analytics (EngineAnalytics)

```mermaid
graph TD
    A["Aplica√ß√£o"] --> B["EngineAnalytics"]
    
    B --> C["init()"]
    B --> D["logEvent()"]
    B --> E["setUserId()"]
    B --> F["setUserProperty()"]
    B --> G["setPage()"]
    B --> H["logAppOpen()"]
    
    C --> I["EngineAnalyticsModel"]
    I --> J["Firebase Analytics Config"]
    I --> K["Faro Config"]
    I --> L["Splunk Config"]
    
    D --> M["Adapters"]
    E --> M
    F --> M
    G --> M
    H --> M
    
    M --> N["EngineFirebaseAnalyticsAdapter"]
    M --> O["EngineFaroAnalyticsAdapter"]
    M --> P["EngineSplunkAnalyticsAdapter"]
    
    N --> Q["Firebase Analytics SDK"]
    O --> R["Grafana Faro SDK"]
    P --> S["Splunk SDK"]
    
    Q --> T["Google Analytics Dashboard"]
    R --> U["Grafana Dashboard"]
    S --> V["Splunk Dashboard"]
```

### üêõ Sistema de Bug Tracking (EngineBugTracking)

```mermaid
graph TD
    A["Aplica√ß√£o"] --> B["EngineBugTracking"]
    
    B --> C["init()"]
    B --> D["log()"]
    B --> E["recordError()"]
    B --> F["recordFlutterError()"]
    B --> G["setCustomKey()"]
    B --> H["setUserIdentifier()"]
    B --> I["testCrash()"]
    
    C --> J["EngineBugTrackingModel"]
    J --> K["Crashlytics Config"]
    J --> L["Faro Config"]
    
    D --> M["Adapters"]
    E --> M
    F --> M
    G --> M
    H --> M
    I --> M
    
    M --> N["EngineCrashlyticsAdapter"]
    M --> O["EngineFaroBugTrackingAdapter"]
    
    N --> P["Firebase Crashlytics SDK"]
    O --> Q["Grafana Faro SDK"]
    
    P --> R["Firebase Console"]
    Q --> S["Grafana Dashboard"]
    
    T["Flutter Error Handler"] --> F
    U["Platform Error Handler"] --> E
    
    V["Custom Errors"] --> E
    W["Logging Events"] --> D
```

## üöÄ Exemplos de Uso

O pacote inclui exemplos completos demonstrando todas as funcionalidades:

### üì± Exemplo Principal
Demonstra inicializa√ß√£o, tracking de eventos, propriedades de usu√°rio e navega√ß√£o:
```bash
cd example && flutter run
```

### üåê Exemplo HTTP Tracking
Novo exemplo demonstrando tracking de requisi√ß√µes HTTPS com APIs p√∫blicas:
- **Pok√©API**: Requisi√ß√µes GET para dados de pok√©mons
- **JSONPlaceholder**: GET de posts/usu√°rios e POST para cria√ß√£o
- **Tracking completo**: Tempo de resposta, c√≥digos de status, tratamento de erros

Para acessar: Execute o app e toque em **"HTTP Tracking"**

### üëÅÔ∏è Exemplo View Tracking
Sistema completo de tracking autom√°tico de telas com `EngineStatelessWidget` e `EngineStatefulWidget`:
- Tracking autom√°tico de visualiza√ß√µes
- Logging de a√ß√µes do usu√°rio
- Monitoramento de ciclo de vida

Para acessar: Execute o app e toque em **"View Tracking"**

## üìä Analytics

O `EngineAnalytics` oferece integra√ß√£o com Firebase Analytics e Grafana Faro para tracking completo de eventos e comportamento do usu√°rio.

### üéØ Configura√ß√£o B√°sica

```dart
import 'package:engine_tracking/engine_tracking.dart';

Future<void> setupAnalytics() async {
  final analyticsModel = EngineAnalyticsModel(
    firebaseAnalyticsConfig: const EngineFirebaseAnalyticsConfig(enabled: true),
    faroConfig: const EngineFaroConfig(
      enabled: true,
      endpoint: 'https://faro-collector.grafana.net/collect',
      appName: 'MeuApp',
      appVersion: '1.0.0',
      environment: 'production',
      apiKey: 'sua-chave-api-faro',
    ),
    googleLoggingConfig: const  EngineGoogleLoggingConfig(
    enabled: true,
    projectId: 'seu-projeto-gcp',
    logName: 'engine-tracking',
    credentials: {
      // Conte√∫do completo do arquivo JSON da Service Account
      "type": "service_account",
      "project_id": "seu-projeto-gcp",
      "private_key_id": "...",
      "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",
      "client_email": "sua-service-account@seu-projeto-gcp.iam.gserviceaccount.com",
      "client_id": "...",
      "auth_uri": "https://accounts.google.com/o/oauth2/auth",
      "token_uri": "https://oauth2.googleapis.com/token",
      "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
      "client_x509_cert_url": "...",
    },
    resource: {
      'type': 'global',
      'labels': {'project_id': 'seu-projeto-gcp'},
      },
    ),
    splunkConfig: const EngineSplunkConfig(enabled: false, /* outros campos */),
    );

  await EngineAnalytics.init(analyticsModel);
}
```

### üìà Logging de Eventos

```dart
// Evento simples (Session ID inclu√≠do automaticamente)
await EngineAnalytics.logEvent('button_clicked');
// Output: {
//   "event_name": "button_clicked",
//   "session_id": "818c22c7-bcab-4e37-a12e-cd42a49547c6"
// }

// Evento com par√¢metros
await EngineAnalytics.logEvent('purchase_completed', {
  'item_id': 'premium_plan',
  'value': 29.99,
  'currency': 'BRL',
  'category': 'subscription',
});
// Output: {
//   "event_name": "purchase_completed",
//   "session_id": "818c22c7-bcab-4e37-a12e-cd42a49547c6",
//   "item_id": "premium_plan",
//   "value": 29.99,
//   "currency": "BRL",
//   "category": "subscription"
// }

// Evento de abertura do app
await EngineAnalytics.logAppOpen();
```

### üë§ Gerenciamento de Usu√°rio

```dart
// Definir ID do usu√°rio
await EngineAnalytics.setUserId('user_12345');

// Com informa√ß√µes completas (para Faro)
await EngineAnalytics.setUserId(
  'user_12345',
  'usuario@exemplo.com',
  'Jo√£o Silva',
);

// Propriedades do usu√°rio
await EngineAnalytics.setUserProperty('user_type', 'premium');
await EngineAnalytics.setUserProperty('plan', 'monthly');
```

### üß≠ Navega√ß√£o de Telas

```dart
// Tela simples
await EngineAnalytics.setPage('HomeScreen');

// Com contexto completo
await EngineAnalytics.setPage(
  'ProductScreen',      // Tela atual
  'HomeScreen',        // Tela anterior
  'ECommerceApp',      // Classe da tela
);
```

### ‚úÖ Verifica√ß√£o de Status

```dart
// Verificar se analytics est√° habilitado
if (EngineAnalytics.isEnabled) {
  print('‚úÖ Analytics est√° ativo');
}

// Verificar servi√ßos espec√≠ficos
if (EngineAnalytics.isFirebaseAnalyticsEnabled) {
  print('üî• Firebase Analytics ativo');
}

if (EngineAnalytics.isFaroEnabled) {
  print('üìä Faro Analytics ativo');
}

if (EngineAnalytics.isGoogleLoggingInitialized) {
  print('‚òÅÔ∏è Google Cloud Logging ativo');
}
```

## üêõ Bug Tracking

O `EngineBugTracking` oferece captura e logging de erros usando Firebase Crashlytics e Grafana Faro.

### ‚öôÔ∏è Configura√ß√£o B√°sica

```dart
import 'package:engine_tracking/engine_tracking.dart';

Future<void> setupBugTracking() async {
  final bugTrackingModel = EngineBugTrackingModel(
    crashlyticsConfig: const EngineCrashlyticsConfig(enabled: true),
    faroConfig: const EngineFaroConfig(
      enabled: true,
      endpoint: 'https://faro-collector.grafana.net/collect',
      appName: 'MeuApp',
      appVersion: '1.0.0',
      environment: 'production',
      apiKey: 'sua-chave-api-faro',
    ),
    googleLoggingConfig: const  EngineGoogleLoggingConfig(
    enabled: true,
    projectId: 'seu-projeto-gcp',
    logName: 'engine-tracking',
    credentials: {
      // Conte√∫do completo do arquivo JSON da Service Account
      "type": "service_account",
      "project_id": "seu-projeto-gcp",
      "private_key_id": "...",
      "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",
      "client_email": "sua-service-account@seu-projeto-gcp.iam.gserviceaccount.com",
      "client_id": "...",
      "auth_uri": "https://accounts.google.com/o/oauth2/auth",
      "token_uri": "https://oauth2.googleapis.com/token",
      "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
      "client_x509_cert_url": "...",
    },
    resource: {
      'type': 'global',
      'labels': {'project_id': 'seu-projeto-gcp'},
    },
  );

  await EngineBugTracking.init(bugTrackingModel);
}
```

### üìù Logging Estruturado

```dart
// Log simples
await EngineBugTracking.log('Usu√°rio fez login');

// Log com contexto detalhado
await EngineBugTracking.log(
  'Erro no processamento de pagamento',
  level: 'error',
  attributes: {
    'user_id': 'user_12345',
    'payment_method': 'credit_card',
    'amount': 29.99,
    'transaction_id': 'txn_abc123',
  },
  stackTrace: StackTrace.current,
);
```

### üë§ Gerenciamento de Usu√°rio

```dart
// Definir informa√ß√µes do usu√°rio
await EngineBugTracking.setUserIdentifier(
  'user_12345',
  'usuario@exemplo.com',
  'Jo√£o Silva',
);

// Chaves customizadas
await EngineBugTracking.setCustomKey('plan_type', 'premium');
await EngineBugTracking.setCustomKey('last_login', DateTime.now().toString());
await EngineBugTracking.setCustomKey('device_type', 'mobile');
```

### üö® Tratamento de Erros

```dart
// Captura manual de erro
try {
  await riskyOperation();
} catch (error, stackTrace) {
  await EngineBugTracking.recordError(
    error,
    stackTrace,
    reason: 'Falha na opera√ß√£o cr√≠tica',
    information: ['Contexto adicional', 'Dados do usu√°rio'],
    isFatal: false,
    data: {
      'operation_id': '12345',
      'user_id': 'user_123',
      'timestamp': DateTime.now().toIso8601String(),
    },
  );
}

// Tratamento global de erros Flutter
FlutterError.onError = EngineBugTracking.recordFlutterError;
```

### üß™ Teste de Crash (Debug)

```dart
// Apenas em modo debug para testar integra√ß√£o
#if DEBUG
await EngineBugTracking.testCrash();
#endif
```

## üÜî Session ID (Correla√ß√£o Autom√°tica)

O `EngineSession` oferece sistema de correla√ß√£o de logs e analytics atrav√©s de UUID v4 √∫nico por sess√£o do app.

### üéØ Caracter√≠sticas Principais

- ‚ú® **Zero Configura√ß√£o**: Session ID gerado automaticamente na primeira chamada
- üîó **Correla√ß√£o Autom√°tica**: UUID v4 inclu√≠do automaticamente em todos os eventos
- üÜî **Padr√£o RFC 4122**: Compatible com qualquer sistema que use UUID v4
- üîÑ **Singleton Pattern**: Mesma inst√¢ncia de sess√£o durante toda a vida do app
- üß™ **Test√°vel**: M√©todo `resetForTesting()` para cen√°rios de teste

### üöÄ Uso Autom√°tico

O Session ID √© inclu√≠do automaticamente em todos os eventos sem configura√ß√£o adicional:

```dart
// Zero configura√ß√£o necess√°ria!
await EngineAnalytics.logEvent('button_clicked', {'action': 'submit'});
// Resultado: 
// {
//   "event_name": "button_clicked",
//   "session_id": "818c22c7-bcab-4e37-a12e-cd42a49547c6",
//   "action": "submit"
// }

await EngineLog.info('User action completed');
// Resultado no Google Cloud Logging:
// {
//   "message": "User action completed",
//   "session_id": "818c22c7-bcab-4e37-a12e-cd42a49547c6",
//   "level": "info"
// }
```

### üîç Acesso Direto (Opcional)

Se precisar acessar o Session ID diretamente:

```dart
import 'package:engine_tracking/engine_tracking.dart';

// Obter Session ID atual
String sessionId = EngineSession.instance.sessionId;
print('Current Session: $sessionId');

// Verificar formato UUID v4
bool isValidUUID = EngineSession.instance.isValidUUIDv4(sessionId);
print('Valid UUID v4: $isValidUUID'); // true

// Para testes unit√°rios (reseta session ID)
EngineSession.instance.resetForTesting();
```

### üéØ Formato UUID v4

O Session ID gerado segue o padr√£o UUID v4 (RFC 4122):

```
Format: xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx
Exemplo: 818c22c7-bcab-4e37-a12e-cd42a49547c6

Caracter√≠sticas:
- 32 caracteres hexadecimais (0-9a-f)
- 5 grupos separados por h√≠fen
- 13¬∫ caractere sempre "4" (vers√£o)
- 17¬∫ caractere sempre "8", "9", "a" ou "b" (variant)
```

### üìä Correla√ß√£o nos Pain√©is

Com o Session ID, voc√™ pode:

- **Firebase Analytics**: Filtrar eventos por `session_id` para ver jornada completa
- **Google Cloud Logging**: Usar `session_id` para correlacionar logs da mesma sess√£o
- **Grafana Faro**: Agrupar eventos por sess√£o para an√°lise de performance
- **Splunk**: Criar dashboards de jornada do usu√°rio baseados no `session_id`

```bash
# Exemplo de query no Google Cloud Logging
jsonPayload.session_id="818c22c7-bcab-4e37-a12e-cd42a49547c6"

# Exemplo de filtro no Firebase Analytics
session_id == "818c22c7-bcab-4e37-a12e-cd42a49547c6"
```

## üìã Logging do Sistema

O `EngineLog` oferece sistema de logging estruturado com diferentes n√≠veis.

### üìä N√≠veis de Log

```dart
import 'package:engine_tracking/engine_tracking.dart';

// Debug (Session ID inclu√≠do automaticamente)
await EngineLog.debug('Debug message', data: {'key': 'value'});
// Output: {
//   "message": "Debug message",
//   "session_id": "818c22c7-bcab-4e37-a12e-cd42a49547c6",
//   "key": "value"
// }

// Info
await EngineLog.info('Info message', data: {'status': 'success'});

// Warning
await EngineLog.warning('Warning message', error: exception);

// Error
await EngineLog.error('Error message', error: exception, stackTrace: stackTrace);

// Fatal
await EngineLog.fatal('Fatal error', error: exception, stackTrace: stackTrace);
```

### üè∑Ô∏è N√≠veis Dispon√≠veis

| N√≠vel | Valor | Uso Recomendado |
|-------|-------|-----------------|
| `debug` | 100 | Informa√ß√µes de desenvolvimento |
| `info` | 800 | Informa√ß√µes gerais |
| `warning` | 900 | Avisos e situa√ß√µes inesperadas |
| `error` | 1000 | Erros recuper√°veis |
| `fatal` | 1200 | Erros cr√≠ticos do sistema |

## üîß Configura√ß√£o Avan√ßada

### üèóÔ∏è Configura√ß√£o por Ambiente

```dart
class TrackingConfig {
  static EngineAnalyticsModel getAnalyticsConfig(String environment) {
    final isProduction = environment == 'production';
    
    return EngineAnalyticsModel(
      firebaseAnalyticsConfig: EngineFirebaseAnalyticsConfig(enabled: isProduction),
      faroConfig: EngineFaroConfig(
        enabled: isProduction,
        endpoint: isProduction 
          ? 'https://faro-prod.grafana.net/collect'
          : 'https://faro-dev.grafana.net/collect',
        appName: 'MeuApp',
        appVersion: '1.0.0',
        environment: environment,
        apiKey: isProduction ? 'prod-key' : 'dev-key',
      ),
    );
  }

  static EngineBugTrackingModel getBugTrackingConfig(String environment) {
    final isProduction = environment == 'production';
    
    return EngineBugTrackingModel(
      crashlyticsConfig: EngineCrashlyticsConfig(enabled: isProduction),
      faroConfig: EngineFaroConfig(
        enabled: true, // Faro sempre ativo para debugging
        endpoint: isProduction 
          ? 'https://faro-prod.grafana.net/collect'
          : 'https://faro-dev.grafana.net/collect',
        appName: 'MeuApp',
        appVersion: '1.0.0',
        environment: environment,
        apiKey: isProduction ? 'prod-key' : 'dev-key',
      ),
    );
  }
}
```

### üéõÔ∏è Configura√ß√£o Padr√£o

```dart
// Analytics com configura√ß√£o padr√£o (tudo desabilitado)
final defaultAnalytics = EngineAnalyticsModelDefault();
await EngineAnalytics.init(defaultAnalytics);

// Bug tracking com configura√ß√£o padr√£o (tudo desabilitado)
final defaultBugTracking = EngineBugTrackingModelDefault();
await EngineBugTracking.init(defaultBugTracking);
```

## üìä Modelos de Dados

### EngineAnalyticsModel

```dart
class EngineAnalyticsModel {
  final EngineFirebaseAnalyticsConfig firebaseAnalyticsConfig;
  final EngineFaroConfig faroConfig;
  
  EngineAnalyticsModel({
    required this.firebaseAnalyticsConfig,
    required this.faroConfig,
  });
}

class EngineAnalyticsModelDefault implements EngineAnalyticsModel {
  // Implementa√ß√£o com valores padr√£o desabilitados
}
```

### EngineBugTrackingModel

```dart
class EngineBugTrackingModel {
  final EngineCrashlyticsConfig crashlyticsConfig;
  final EngineFaroConfig faroConfig;
  
  EngineBugTrackingModel({
    required this.crashlyticsConfig,
    required this.faroConfig,
  });
}

class EngineBugTrackingModelDefault implements EngineBugTrackingModel {
  // Implementa√ß√£o com valores padr√£o desabilitados
}
```

### Configura√ß√µes de Servi√ßos

```dart
// Firebase Analytics
class EngineFirebaseAnalyticsConfig {
  final bool enabled;
  
  const EngineFirebaseAnalyticsConfig({required this.enabled});
}

// Firebase Crashlytics
class EngineCrashlyticsConfig {
  final bool enabled;
  
  const EngineCrashlyticsConfig({required this.enabled});
}

// Grafana Faro (Compartilhado)
class EngineFaroConfig {
  final bool enabled;
  final String endpoint;
  final String appName;
  final String appVersion;
  final String environment;
  final String apiKey;
  
  const EngineFaroConfig({
    required this.enabled,
    required this.endpoint,
    required this.appName,
    required this.appVersion,
    required this.environment,
    required this.apiKey,
  });
}
```

### EngineLogLevelType

```dart
enum EngineLogLevelType {
  debug('DEBUG', 100),
  info('INFO', 800),
  warning('WARNING', 900),
  error('ERROR', 1000),
  fatal('FATAL', 1200);

  final String name;
  final int value;
  
  const EngineLogLevelType(this.name, this.value);
}
```

## üì± Exemplo Completo

Execute o exemplo interativo:

```bash
cd example
flutter run
```

### üèóÔ∏è Implementa√ß√£o Completa

```dart
import 'package:flutter/material.dart';
import 'package:engine_tracking/engine_tracking.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // Configurar Analytics
  final analyticsModel = EngineAnalyticsModel(
    firebaseAnalyticsConfig: const EngineFirebaseAnalyticsConfig(enabled: true),
    faroConfig: const EngineFaroConfig(
      enabled: true,
      endpoint: 'https://faro-collector.grafana.net/collect',
      appName: 'MeuApp',
      appVersion: '1.2.3',
      environment: 'production',
      apiKey: 'faro-api-key',
    ),
  );
  
  // Configurar Bug Tracking
  final bugTrackingModel = EngineBugTrackingModel(
    crashlyticsConfig: const EngineCrashlyticsConfig(enabled: true),
    faroConfig: const EngineFaroConfig(
      enabled: true,
      endpoint: 'https://faro-collector.grafana.net/collect',
      appName: 'MeuApp',
      appVersion: '1.2.3',
      environment: 'production',
      apiKey: 'faro-api-key',
    ),
  );
  
  // Inicializar servi√ßos
  await Future.wait([
    EngineAnalytics.init(analyticsModel),
    EngineBugTracking.init(bugTrackingModel),
  ]);
  
  // Configurar usu√°rio
  await Future.wait([
    EngineAnalytics.setUserId('user_12345', 'user@exemplo.com', 'Jo√£o Silva'),
    EngineBugTracking.setUserIdentifier('user_12345', 'user@exemplo.com', 'Jo√£o Silva'),
  ]);
  
  // Configurar tratamento global de erros
  FlutterError.onError = EngineBugTracking.recordFlutterError;
  
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Engine Tracking Demo',
      home: MyHomePage(),
    );
  }
}

class MyHomePage extends StatefulWidget {
  @override
  _MyHomePageState createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  @override
  void initState() {
    super.initState();
    // Registrar visualiza√ß√£o da tela
    EngineAnalytics.setPage('HomeScreen');
  }

  void _onButtonPressed() async {
    // Registrar evento de analytics
    await EngineAnalytics.logEvent('button_pressed', {
      'button_name': 'home_action',
      'timestamp': DateTime.now().millisecondsSinceEpoch,
      'user_journey_step': 'main_interaction',
    });
    
    // Log para debugging
    await EngineBugTracking.log(
      'Bot√£o pressionado na tela inicial',
      level: 'info',
      attributes: {'screen': 'home', 'action': 'button_press'},
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('Engine Tracking Demo')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            ElevatedButton(
              onPressed: _onButtonPressed,
              child: Text('Testar Tracking'),
            ),
            SizedBox(height: 20),
            Card(
              child: Padding(
                padding: EdgeInsets.all(16),
                child: Column(
                  children: [
                    Text('Status dos Servi√ßos:', style: TextStyle(fontWeight: FontWeight.bold)),
                    SizedBox(height: 8),
                    _buildStatusRow('Analytics', EngineAnalytics.isEnabled),
                    _buildStatusRow('Firebase Analytics', EngineAnalytics.isFirebaseAnalyticsEnabled),
                    _buildStatusRow('Faro Analytics', EngineAnalytics.isFaroEnabled),
                    _buildStatusRow('Google Cloud Logging', EngineAnalytics.isGoogleLoggingInitialized),
                    _buildStatusRow('Bug Tracking', EngineBugTracking.isEnabled),
                    _buildStatusRow('Crashlytics', EngineBugTracking.isCrashlyticsEnabled),
                    _buildStatusRow('Faro Logging', EngineBugTracking.isFaroEnabled),
                    _buildStatusRow('GCP Bug Tracking', EngineBugTracking.isGoogleLoggingInitialized),
                  ],
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildStatusRow(String service, bool isEnabled) {
    return Row(
      children: [
        Icon(
          isEnabled ? Icons.check_circle : Icons.cancel,
          size: 16,
          color: isEnabled ? Colors.green : Colors.red,
        ),
        SizedBox(width: 8),
        Text('$service: ${isEnabled ? 'Enabled' : 'Disabled'}'),
      ],
    );
  }
}
```

## üèóÔ∏è Estrutura do Projeto

### üìÅ Organiza√ß√£o de Diret√≥rios e Arquivos

```
engine-tracking/
‚îú‚îÄ‚îÄ .github/                     # üîß Automa√ß√£o e Templates GitHub
‚îÇ   ‚îú‚îÄ‚îÄ workflows/               # üîÑ GitHub Actions Pipelines
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ci.yml              # Pipeline principal CI/CD
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ publish.yml         # Publica√ß√£o autom√°tica pub.dev
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ quality.yml         # Auditorias semanais de qualidade
‚îÇ   ‚îú‚îÄ‚îÄ ISSUE_TEMPLATE/         # üìù Templates de Issues
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bug_report.md       # Template para reportar bugs
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ feature_request.md  # Template para solicitar funcionalidades
‚îÇ   ‚îú‚îÄ‚îÄ pull_request_template.md # Template para Pull Requests
‚îÇ   ‚îî‚îÄ‚îÄ README.md               # Documenta√ß√£o da infraestrutura CI/CD
‚îú‚îÄ‚îÄ lib/                        # üìö C√≥digo fonte principal
‚îÇ   ‚îú‚îÄ‚îÄ engine_tracking.dart    # üö™ Ponto de entrada principal
‚îÇ   ‚îî‚îÄ‚îÄ src/                    # üì¶ Implementa√ß√µes internas
‚îÇ       ‚îú‚îÄ‚îÄ src.dart            # Export barrel centralizado
‚îÇ       ‚îú‚îÄ‚îÄ analytics/          # üìä Sistema de Analytics
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ analytics.dart  # Export barrel do m√≥dulo
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ engine_analytics.dart # Implementa√ß√£o principal
‚îÇ       ‚îú‚îÄ‚îÄ bug_tracking/       # üêõ Sistema de Bug Tracking
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ bug_tracking.dart # Export barrel do m√≥dulo
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ engine_bug_tracking.dart # Implementa√ß√£o principal
‚îÇ       ‚îú‚îÄ‚îÄ config/             # ‚öôÔ∏è Configura√ß√µes dos servi√ßos
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ config.dart     # Export barrel das configura√ß√µes
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ engine_firebase_analytics_config.dart
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ engine_crashlytics_config.dart
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ engine_faro_config.dart
‚îÇ       ‚îú‚îÄ‚îÄ models/             # üèóÔ∏è Modelos de dados
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ models.dart     # Export barrel dos modelos
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ engine_analytics_model.dart
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ engine_bug_tracking_model.dart
‚îÇ       ‚îú‚îÄ‚îÄ enums/              # üè∑Ô∏è Enumera√ß√µes
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ enums.dart      # Export barrel das enumera√ß√µes
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ engine_log_level_type.dart
‚îÇ       ‚îú‚îÄ‚îÄ logging/            # üìù Sistema de logging
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ logging.dart    # Export barrel do logging
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ engine_log.dart # Implementa√ß√£o de logs
‚îÇ       ‚îî‚îÄ‚îÄ observers/          # üëÅÔ∏è Observadores Flutter
‚îÇ           ‚îú‚îÄ‚îÄ observers.dart  # Export barrel dos observadores
‚îÇ           ‚îî‚îÄ‚îÄ engine_navigator_observer.dart
‚îú‚îÄ‚îÄ test/                       # üß™ Testes unit√°rios e de integra√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ analytics/              # Testes do sistema de analytics
‚îÇ   ‚îú‚îÄ‚îÄ bug_tracking/           # Testes do sistema de bug tracking
‚îÇ   ‚îú‚îÄ‚îÄ config/                 # Testes das configura√ß√µes
‚îÇ   ‚îú‚îÄ‚îÄ models/                 # Testes dos modelos de dados
‚îÇ   ‚îú‚îÄ‚îÄ logging/                # Testes do sistema de logging
‚îÇ   ‚îî‚îÄ‚îÄ test_coverage.dart      # Suite completa de testes
‚îú‚îÄ‚îÄ example/                    # üì± Aplica√ß√£o de exemplo
‚îÇ   ‚îú‚îÄ‚îÄ lib/main.dart          # App Flutter demonstrativo
‚îÇ   ‚îú‚îÄ‚îÄ pubspec.yaml           # Depend√™ncias do exemplo
‚îÇ   ‚îî‚îÄ‚îÄ README.md              # Documenta√ß√£o do exemplo
‚îú‚îÄ‚îÄ scripts/                    # üõ†Ô∏è Scripts de desenvolvimento
‚îÇ   ‚îú‚îÄ‚îÄ test_coverage.sh       # Script de cobertura de testes
‚îÇ   ‚îî‚îÄ‚îÄ pana_analysis.sh       # Script de an√°lise de qualidade
‚îú‚îÄ‚îÄ codecov.yml                # üìä Configura√ß√£o Codecov
‚îú‚îÄ‚îÄ pana_config.yaml          # üîç Configura√ß√£o Pana
‚îú‚îÄ‚îÄ pubspec.yaml              # üì¶ Configura√ß√£o do pacote
‚îú‚îÄ‚îÄ CHANGELOG.md              # üìù Hist√≥rico de mudan√ßas
‚îú‚îÄ‚îÄ LICENSE                   # ‚öñÔ∏è Licen√ßa MIT
‚îú‚îÄ‚îÄ README.md                 # üìñ Documenta√ß√£o principal
‚îî‚îÄ‚îÄ analysis_options.yaml    # üî¨ Configura√ß√£o do Dart Analyzer
```

#### ‚öôÔ∏è Arquivos de Configura√ß√£o

##### üìä `codecov.yml` - Cobertura de C√≥digo
- Meta de cobertura: 45% (ajustada para depend√™ncias externas)
- Exclus√µes: Arquivos gerados, testes, exemplos
- Integra√ß√£o com PRs para coment√°rios autom√°ticos

##### üîç `pana_config.yaml` - An√°lise de Qualidade
- Padr√£o de excel√™ncia: 160/160 pontos
- Verifica√ß√µes completas habilitadas
- Exclus√£o de arquivos de desenvolvimento

##### üì¶ `pubspec.yaml` - Configura√ß√£o do Pacote
- Depend√™ncias otimizadas
- Metadados completos para pub.dev
- Compatibilidade com Flutter >=3.32.0 e Dart >=3.8.0

### üéØ Arquitetura e Padr√µes

#### üèóÔ∏è Padr√µes Arquiteturais
- **Construtor Privado**: Previne instancia√ß√£o desnecess√°ria
- **API Est√°tica**: M√©todos est√°ticos para facilidade de uso
- **Inicializa√ß√£o Condicional**: Servi√ßos inicializam apenas se habilitados
- **Export Unificado**: Import √∫nico para todo o pacote

#### üîí Princ√≠pios de Qualidade
- **Tipo-seguro**: Implementa√ß√£o completamente tipada
- **Test√°vel**: Arquitetura focada em testabilidade
- **Configur√°vel**: Flexibilidade total na configura√ß√£o
- **Perform√°tico**: Inicializa√ß√£o sob demanda

## üîß Desenvolvimento

### üìÅ Estrutura T√©cnica

```
lib/
‚îú‚îÄ‚îÄ engine_tracking.dart           # Ponto de entrada principal
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ src.dart                    # Exporta√ß√µes centralizadas
    ‚îú‚îÄ‚îÄ analytics/                  # Sistema de analytics
    ‚îÇ   ‚îú‚îÄ‚îÄ analytics.dart          # Export barrel
    ‚îÇ   ‚îî‚îÄ‚îÄ engine_analytics.dart   # Implementa√ß√£o principal
    ‚îú‚îÄ‚îÄ bug_tracking/               # Sistema de bug tracking
    ‚îÇ   ‚îú‚îÄ‚îÄ bug_tracking.dart       # Export barrel
    ‚îÇ   ‚îî‚îÄ‚îÄ engine_bug_tracking.dart # Implementa√ß√£o principal
    ‚îú‚îÄ‚îÄ config/                     # Configura√ß√µes dos servi√ßos
    ‚îÇ   ‚îú‚îÄ‚îÄ config.dart             # Export barrel
    ‚îÇ   ‚îú‚îÄ‚îÄ engine_firebase_analytics_config.dart
    ‚îÇ   ‚îú‚îÄ‚îÄ engine_crashlytics_config.dart
    ‚îÇ   ‚îú‚îÄ‚îÄ engine_faro_config.dart
    ‚îÇ   ‚îî‚îÄ‚îÄ engine_google_logging_config.dart
    ‚îú‚îÄ‚îÄ models/                     # Modelos de dados
    ‚îÇ   ‚îú‚îÄ‚îÄ models.dart             # Export barrel
    ‚îÇ   ‚îú‚îÄ‚îÄ engine_analytics_model.dart
    ‚îÇ   ‚îî‚îÄ‚îÄ engine_bug_tracking_model.dart
    ‚îú‚îÄ‚îÄ enums/                      # Enumera√ß√µes
    ‚îÇ   ‚îú‚îÄ‚îÄ enums.dart              # Export barrel
    ‚îÇ   ‚îî‚îÄ‚îÄ engine_log_level_type.dart
    ‚îú‚îÄ‚îÄ logging/                    # Sistema de logging
    ‚îÇ   ‚îú‚îÄ‚îÄ logging.dart            # Export barrel
    ‚îÇ   ‚îî‚îÄ‚îÄ engine_log.dart         # Implementa√ß√£o de logging
    ‚îî‚îÄ‚îÄ observers/                  # Observadores Flutter
        ‚îú‚îÄ‚îÄ observers.dart          # Export barrel
        ‚îî‚îÄ‚îÄ engine_navigator_observer.dart

test/
‚îú‚îÄ‚îÄ analytics/                      # Testes de analytics
‚îú‚îÄ‚îÄ bug_tracking/                   # Testes de bug tracking
‚îú‚îÄ‚îÄ config/                         # Testes de configura√ß√£o
‚îú‚îÄ‚îÄ models/                         # Testes de modelos
‚îú‚îÄ‚îÄ logging/                        # Testes de logging
‚îî‚îÄ‚îÄ test_coverage.dart              # Suite completa de testes

example/                            # App de demonstra√ß√£o
‚îú‚îÄ‚îÄ lib/main.dart                   # Implementa√ß√£o de exemplo
‚îú‚îÄ‚îÄ pubspec.yaml                    # Depend√™ncias do exemplo
‚îî‚îÄ‚îÄ README.md                       # Documenta√ß√£o do exemplo
```

## Sistema de Tracking de Views

Este sistema fornece funcionalidades autom√°ticas de tracking para widgets StatelessWidget e StatefulWidget, permitindo monitorar o comportamento do usu√°rio passo a passo.

## üéØ Widget Tracking

O Engine Tracking oferece um sistema avan√ßado de tracking autom√°tico para widgets, permitindo monitoramento transparente de navega√ß√£o, a√ß√µes do usu√°rio e ciclo de vida de telas.

### Caracter√≠sticas dos Widgets

- üìä **Tracking Autom√°tico**: Visualiza√ß√µes de tela registradas automaticamente
- üîÑ **Ciclo de Vida**: Monitoramento de init/dispose em StatefulWidgets  
- üëÜ **A√ß√µes do Usu√°rio**: M√©todos integrados para logging de intera√ß√µes
- üìù **Eventos Customizados**: Sistema flex√≠vel para eventos espec√≠ficos
- üêõ **Tratamento de Erros**: Captura contextualizada de erros por tela
- ‚öôÔ∏è **Configur√°vel**: Controle granular sobre tracking autom√°tico

### Implementa√ß√µes Dispon√≠veis

#### 1. Classes Engine (Recomendado)

As classes Engine oferecem implementa√ß√£o completa com tracking autom√°tico integrado.

##### EngineStatelessWidget

```dart
import 'package:engine_tracking/engine_tracking.dart';

class HomePage extends EngineStatelessWidget {
  HomePage({super.key});

  @override
  String get screenName => 'home_page';

  @override
  Map<String, dynamic>? get screenParameters => {
    'version': '1.0.0',
    'source': 'main_menu',
  };

  @override
  Widget buildWithTracking(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('In√≠cio')),
      body: Column(
        children: [
          ElevatedButton(
            onPressed: () {
              logUserAction('button_pressed', parameters: {
                'button_type': 'primary',
                'action': 'navigate_to_settings',
              });
            },
            child: const Text('Configura√ß√µes'),
          ),
          ElevatedButton(
            onPressed: () {
              logCustomEvent('feature_accessed', parameters: {
                'feature': 'premium_content',
              });
            },
            child: const Text('Conte√∫do Premium'),
          ),
        ],
      ),
    );
  }
}
```

##### EngineStatefulWidget

```dart
import 'package:engine_tracking/engine_tracking.dart';

class ProfilePage extends EngineStatefulWidget {
  const ProfilePage({super.key});

  @override
  EngineStatefulWidgetState<ProfilePage> createState() => _ProfilePageState();
}

class _ProfilePageState extends EngineStatefulWidgetState<ProfilePage> {
  String _userName = '';
  
  @override
  String get screenName => 'profile_page';

  @override
  Map<String, dynamic>? get screenParameters => {
    'user_type': 'premium',
  };

  @override
  Widget buildWithTracking(BuildContext context) {
    return Scaffold(
      body: Column(
        children: [
          TextField(
            onChanged: (value) {
              setState(() {
                _userName = value;
              });
              
              logStateChange('username_changed', additionalData: {
                'character_count': value.length,
              });
            },
          ),
          ElevatedButton(
            onPressed: () {
              logUserAction('profile_updated', parameters: {
                'field': 'username',
                'new_length': _userName.length,
              });
            },
            child: const Text('Salvar'),
          ),
        ],
      ),
    );
  }
}
```

### Exemplo Completo com Classes Engine

```dart
import 'package:engine_tracking/engine_tracking.dart';

class SettingsPage extends EngineStatelessWidget {
  SettingsPage({super.key});

  @override
  String get screenName => 'settings_page';

  @override
  Widget buildWithTracking(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Configura√ß√µes')),
      body: ListView(
        children: [
          ListTile(
            title: const Text('Notifica√ß√µes'),
            onTap: () => logUserAction('settings_item_tapped', 
              parameters: {'item': 'notifications'}),
          ),
          ListTile(
            title: const Text('Privacidade'),
            onTap: () => logUserAction('settings_item_tapped', 
              parameters: {'item': 'privacy'}),
          ),
        ],
      ),
    );
  }
}
```

```dart
import 'package:engine_tracking/engine_tracking.dart';

class LoginPage extends EngineStatefulWidget {
  const LoginPage({super.key});

  @override
  EngineStatefulWidgetState<LoginPage> createState() => _LoginPageState();
}

class _LoginPageState extends EngineStatefulWidgetState<LoginPage> {
  bool _isLoading = false;

  @override
  String get screenName => 'login_page';

  @override
  Widget buildWithTracking(BuildContext context) {
    return Scaffold(
      body: Column(
        children: [
          TextField(
            decoration: const InputDecoration(labelText: 'Email'),
            onSubmitted: (value) {
              logUserAction('field_completed', parameters: {
                'field': 'email',
                'has_value': value.isNotEmpty,
              });
            },
          ),
          ElevatedButton(
            onPressed: _isLoading ? null : () async {
              setState(() {
                _isLoading = true;
              });
              
              logStateChange('login_started');
              
              try {
                await Future.delayed(const Duration(seconds: 2));
                logUserAction('login_success');
              } catch (e) {
                logScreenError('Login falhou', 
                  exception: e, 
                  additionalData: {'retry_count': 1});
              }
              
              setState(() {
                _isLoading = false;
              });
            },
            child: _isLoading 
              ? const CircularProgressIndicator() 
              : const Text('Entrar'),
          ),
        ],
      ),
    );
  }
}
```

## M√©todos Dispon√≠veis

### Tracking Autom√°tico
- `_trackScreenView()`: Registra visualiza√ß√£o da tela automaticamente
- **Ciclo de vida**: initState/dispose tracking (apenas StatefulWidget)

### M√©todos de Logging
- `logUserAction(action, {parameters})`: Registra a√ß√µes do usu√°rio
- `logCustomEvent(eventName, {parameters})`: Registra eventos customizados
- `logScreenError(error, {exception, stackTrace, additionalData})`: Registra erros
- `logStateChange(description, {additionalData})`: Registra mudan√ßas de estado (StatefulWidget)

### Configura√ß√µes
- `screenName`: Nome da tela (padr√£o: nome da classe)
- `screenParameters`: Par√¢metros adicionais da tela
- `enableAutoTracking`: Ativa/desativa tracking autom√°tico
- `enableLifecycleTracking`: Ativa/desativa tracking de ciclo de vida (StatefulWidget)

## Dados Coletados

### Visualiza√ß√£o de Tela
```json
{
  "screen_name": "home_page",
  "screen_type": "StatelessWidget",
  "timestamp": "2023-12-01T10:30:00.000Z",
  "parameters": {"version": "1.0.0"}
}
```

### A√ß√£o do Usu√°rio
```json
{
  "screen_name": "home_page",
  "action": "button_pressed",
  "widget_type": "StatelessWidget",
  "button_type": "primary"
}
```

### Fechamento de Tela (StatefulWidget)
```json
{
  "screen_name": "profile_page",
  "widget_type": "StatefulWidget",
  "time_spent_seconds": 45,
  "time_spent_minutes": 0
}
```

## Integra√ß√£o com Analytics

Todos os eventos s√£o automaticamente enviados para:
- **Firebase Analytics** (se configurado)
- **Grafana Faro** (se configurado)
- **Google Cloud Logging** (se configurado)
- **Engine Log** para debugging

## Melhores Pr√°ticas

1. **Use nomes descritivos** para telas e a√ß√µes
2. **Inclua par√¢metros relevantes** sem dados sens√≠veis
3. **Monitore erros** com contexto apropriado
4. **Use classes Engine** para funcionalidade completa
5. **Personalize screenName** para identifica√ß√£o clara
6. **Agrupe a√ß√µes relacionadas** com prefixos consistentes

## Desabilitando Tracking

```dart
class MyPage extends EngineStatelessWidget {
  MyPage({super.key});
  
  @override
  bool get enableAutoTracking => false; // Desabilita tracking autom√°tico
  
  @override
  Widget buildWithTracking(BuildContext context) {
    // ... resto da implementa√ß√£o
  }
}
```

## Exemplo de Uso Avan√ßado

```dart
class ShoppingCartPage extends StatefulWidget {
  final List<Product> initialProducts;
  
  const ShoppingCartPage({super.key, required this.initialProducts});

  @override
  State<ShoppingCartPage> createState() => _ShoppingCartPageState();
}

class _ShoppingCartPageState extends EngineStatefulWidgetState<ShoppingCartPage> {
  
  late List<Product> _products;
  
  @override
  void initState() {
    super.initState();
    _products = List.from(widget.initialProducts);
  }
  
  @override
  String get screenName => 'shopping_cart';

  @override
  Map<String, dynamic>? get screenParameters => {
    'initial_product_count': widget.initialProducts.length,
    'cart_value': _calculateTotal(),
  };

  @override
  Widget buildWithTracking(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Carrinho')),
      body: ListView.builder(
        itemCount: _products.length,
        itemBuilder: (context, index) {
          final product = _products[index];
          return ListTile(
            title: Text(product.name),
            trailing: IconButton(
              icon: const Icon(Icons.remove_circle),
              onPressed: () {
                setState(() {
                  _products.removeAt(index);
                });
                
                logUserAction('product_removed', parameters: {
                  'product_id': product.id,
                  'product_name': product.name,
                  'remaining_count': _products.length,
                });
                
                logStateChange('cart_updated', additionalData: {
                  'action': 'removal',
                  'new_total': _calculateTotal(),
                });
              },
            ),
          );
        },
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () {
          logUserAction('checkout_initiated', parameters: {
            'product_count': _products.length,
            'total_value': _calculateTotal(),
          });
        },
        child: const Icon(Icons.shopping_cart_checkout),
      ),
    );
  }
  
  double _calculateTotal() {
    return _products.fold(0.0, (sum, product) => sum + product.price);
  }
}
```

### üß™ Scripts de Desenvolvimento

```bash
# Executar todos os testes
flutter test

# Testes com cobertura
flutter test --coverage
genhtml coverage/lcov.info -o coverage/html

# An√°lise est√°tica
dart analyze

# Formata√ß√£o de c√≥digo
dart format .

# Publicar (dry-run)
dart pub publish --dry-run
```

### üìä Comandos de Qualidade

```bash
# Verificar cobertura
dart pub global activate test_coverage
dart pub global run test_coverage --min-coverage=95

# An√°lise Pana
dart pub global activate pana
dart pub global run pana

# Verificar depend√™ncias
dart pub outdated

# Atualizar depend√™ncias
dart pub upgrade
```

## üß™ Testes

Execute os testes:

```bash
flutter test
```

**Status dos Testes:**
- ‚úÖ **96 testes passando** (100% dos testes implementados)
- ‚úÖ **Testes otimizados** para integra√ß√µes Firebase/Faro/Google Cloud (evitam depend√™ncias externas)
- ‚úÖ **100% de cobertura** nos arquivos de configura√ß√£o e modelos
- ‚úÖ **Testes completos** para sistema de logging e Google Cloud Logging
- ‚úÖ **Testes completos** para Session ID com valida√ß√£o UUID v4 RFC 4122

**Observa√ß√µes:**
- Testes de inicializa√ß√£o com Firebase/Faro s√£o mocados para evitar depend√™ncias reais
- Todos os testes de l√≥gica de neg√≥cio e configura√ß√£o passam corretamente
- Cobertura focada em componentes test√°veis sem depend√™ncias externas

Para cobertura de testes:

```bash
flutter test --coverage
genhtml coverage/lcov.info -o coverage/html
open coverage/html/index.html
```

## üì± Plataformas Suportadas

- ‚úÖ iOS
- ‚úÖ Android

## ü§ñ Integra√ß√£o MCP (Model Context Protocol)

O Engine Tracking v1.3.0 inclui suporte completo ao **Model Context Protocol (MCP)**, permitindo que assistentes de IA (como Claude, GPT-4, etc.) acessem dados do projeto em tempo real.

### üîß Configura√ß√£o R√°pida

O projeto inclui configura√ß√£o autom√°tica para os principais servi√ßos:

```bash
# Ver documenta√ß√£o completa
docs/MCP_CONFIGURATION.md
docs/MCP_QUICK_SETUP.md
```

### üõ†Ô∏è Servi√ßos Suportados

| Servi√ßo | Funcionalidades | Status |
|---------|----------------|--------|
| **GitHub** | Repos, Issues, PRs, Code Search | ‚úÖ Configurado |
| **Firebase** | Projetos, Deploy, Firestore, Functions | ‚úÖ Configurado |
| **Supabase** | Tabelas, SQL, Schema, Projetos | ‚öôÔ∏è Requer tokens |
| **TaskMaster** | Tarefas, Status, Subtarefas | ‚úÖ Configurado |

### üìã Ferramentas Inclu√≠das

```bash
# Testar configura√ß√µes MCP
node scripts/test_mcp_connections.js

# Configurar tokens interativamente
node scripts/setup_mcp_tokens.js

# Ver status atual
node scripts/setup_mcp_tokens.js --status
```

### üí° Capacidades

Com MCP configurado, sua IA pode:
- üîç **Acessar reposit√≥rios** GitHub em tempo real
- üî• **Gerenciar projetos** Firebase
- üóÑÔ∏è **Consultar bancos** Supabase
- üìä **Monitorar tarefas** TaskMaster
- üìù **Analisar c√≥digo** e estrutura do projeto

### üöÄ Exemplo de Uso

```
Pergunta √† IA: "Mostre o status dos adaptadores Google Cloud Logging"
Resposta: Lista arquivos, testes e documenta√ß√£o automaticamente

Pergunta: "Quais tarefas est√£o pendentes no TaskMaster?"
Resposta: Acessa e mostra tarefas em tempo real
```

## ü§ù Contribui√ß√£o

Contribui√ß√µes s√£o bem-vindas! Por favor:

1. Fork o projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

### üìã Diretrizes de Contribui√ß√£o

- Mantenha 95%+ de cobertura de testes
- Siga o padr√£o de c√≥digo existente
- Documente novas funcionalidades
- Teste em Android e iOS
- Atualize o CHANGELOG.md

## üìÑ Licen√ßa

Este projeto est√° licenciado sob a Licen√ßa MIT - veja o arquivo LICENSE para detalhes.

## üè¢ Sobre a STMR

Desenvolvido pela STMR - Especialistas em solu√ß√µes m√≥veis.

---

**üí° Dica v1.3.0**: Para m√°xima efici√™ncia, configure apenas os servi√ßos que voc√™ realmente utiliza. A biblioteca √© otimizada para funcionar com qualquer combina√ß√£o de servi√ßos habilitados ou desabilitados. Com **Session ID autom√°tico**, **Google Cloud Logging** e **MCP**, voc√™ agora tem correla√ß√£o completa de logs, centraliza√ß√£o avan√ßada e integra√ß√£o perfeita com assistentes de IA! üÜîüî• 